<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_06) on Thu Mar 28 09:08:13 PDT 2013 -->
<title>DataCollector</title>
<meta name="date" content="2013-03-28">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DataCollector";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/wolvencraft/yasp/CommandManager.html" title="enum in com.wolvencraft.yasp"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/wolvencraft/yasp/DataCollector.html" target="_top">Frames</a></li>
<li><a href="DataCollector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.wolvencraft.yasp</div>
<h2 title="Class DataCollector" class="title">Class DataCollector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.wolvencraft.yasp.DataCollector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DataCollector</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">Stores collected statistical data until it can be processed and sent to the database.<br />
 This class is intended to be run in an asynchronous thread; all components are thread-safe.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>bitWolfy</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#DataCollector()">DataCollector</a></strong>()</code>
<div class="block"><b>Default constructor.</b><br />
 Initializes an empty list of LocalSessions</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#dumpPlayerData()">dumpPlayerData</a></strong>()</code>
<div class="block">Cycles through all open player sessions and dumps their data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp">LocalSession</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#get(org.bukkit.entity.Player)">get</a></strong>(<a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/entity/Player.html?is-external=true" title="class or interface in org.bukkit.entity">Player</a>&nbsp;player)</code>
<div class="block">Returns the LocalSession associated with the specified player.<br />
 If no session is found, it will be created.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/wolvencraft/yasp/OfflineSession.html" title="class in com.wolvencraft.yasp">OfflineSession</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#get(java.lang.String)">get</a></strong>(java.lang.String&nbsp;playerName)</code>
<div class="block">Attempts to find a player session by the name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.Integer</code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#getPlayerId(org.bukkit.entity.Player)">getPlayerId</a></strong>(<a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/entity/Player.html?is-external=true" title="class or interface in org.bukkit.entity">Player</a>&nbsp;player)</code>
<div class="block">Returns the PlayerID corresponding with the specified username.<br />
 If the username is not in the database, a dummy entry is created, and an ID is assigned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/wolvencraft/yasp/db/data/sync/ServerStatistics.html" title="class in com.wolvencraft.yasp.db.data.sync">ServerStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#getStats()">getStats</a></strong>()</code>
<div class="block">Returns the generic server statistics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../com/wolvencraft/yasp/db/data/receive/ServerTotals.html" title="class in com.wolvencraft.yasp.db.data.receive">ServerTotals</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#getTotals()">getTotals</a></strong>()</code>
<div class="block">Returns the server totals for signs and books</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#pushPlayerData()">pushPlayerData</a></strong>()</code>
<div class="block">Forces the plugin to synchronize the player data to the database.<br />
 If the player is not online, removes the session after the synchronization is complete.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#remove(com.wolvencraft.yasp.LocalSession)">remove</a></strong>(<a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp">LocalSession</a>&nbsp;session)</code>
<div class="block">Removes the specified session</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/wolvencraft/yasp/DataCollector.html#run()">run</a></strong>()</code>
<div class="block">Main database synchronization method.<br />
 Performs actions in the following order:<br />
 
 Confirm that the synchronization is not paused.
 Push all player data to the database
 Push generic server statistics to the database
 Fetch server totals for signs and statistics books
 
 This method is likely to freeze the main server thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataCollector()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataCollector</h4>
<pre>public&nbsp;DataCollector()</pre>
<div class="block"><b>Default constructor.</b><br />
 Initializes an empty list of LocalSessions</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Main database synchronization method.<br />
 Performs actions in the following order:<br />
 <ul>
 <li>Confirm that the synchronization is not paused.</li>
 <li>Push all player data to the database</li>
 <li>Push generic server statistics to the database</li>
 <li>Fetch server totals for signs and statistics books</li>
 </ul>
 This method is likely to freeze the main server thread.
 Asynchronous threading is strongly recommended.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="pushPlayerData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pushPlayerData</h4>
<pre>public static&nbsp;void&nbsp;pushPlayerData()</pre>
<div class="block">Forces the plugin to synchronize the player data to the database.<br />
 If the player is not online, removes the session after the synchronization is complete.</div>
</li>
</ul>
<a name="dumpPlayerData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpPlayerData</h4>
<pre>public static&nbsp;void&nbsp;dumpPlayerData()</pre>
<div class="block">Cycles through all open player sessions and dumps their data.
 After that, clears the session list.</div>
</li>
</ul>
<a name="get(org.bukkit.entity.Player)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public static&nbsp;<a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp">LocalSession</a>&nbsp;get(<a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/entity/Player.html?is-external=true" title="class or interface in org.bukkit.entity">Player</a>&nbsp;player)</pre>
<div class="block">Returns the LocalSession associated with the specified player.<br />
 If no session is found, it will be created.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>player</code> - Tracked player</dd>
<dt><span class="strong">Returns:</span></dt><dd>LocalSession associated with the player.</dd></dl>
</li>
</ul>
<a name="get(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public static&nbsp;<a href="../../../com/wolvencraft/yasp/OfflineSession.html" title="class in com.wolvencraft.yasp">OfflineSession</a>&nbsp;get(java.lang.String&nbsp;playerName)</pre>
<div class="block">Attempts to find a player session by the name. The player might be offline.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>playerName</code> - Name of the player</dd>
<dt><span class="strong">Returns:</span></dt><dd>OfflineSession with the specified player name, even if there isn't one.</dd></dl>
</li>
</ul>
<a name="remove(com.wolvencraft.yasp.LocalSession)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public static&nbsp;void&nbsp;remove(<a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp">LocalSession</a>&nbsp;session)</pre>
<div class="block">Removes the specified session</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - Session to remove</dd></dl>
</li>
</ul>
<a name="getPlayerId(org.bukkit.entity.Player)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPlayerId</h4>
<pre>public static&nbsp;java.lang.Integer&nbsp;getPlayerId(<a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/entity/Player.html?is-external=true" title="class or interface in org.bukkit.entity">Player</a>&nbsp;player)</pre>
<div class="block">Returns the PlayerID corresponding with the specified username.<br />
 If the username is not in the database, a dummy entry is created, and an ID is assigned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>player</code> - Player name to look up in the database</dd>
<dt><span class="strong">Returns:</span></dt><dd><b>Integer</b> PlayerID corresponding to the specified username</dd></dl>
</li>
</ul>
<a name="getTotals()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotals</h4>
<pre>public static&nbsp;<a href="../../../com/wolvencraft/yasp/db/data/receive/ServerTotals.html" title="class in com.wolvencraft.yasp.db.data.receive">ServerTotals</a>&nbsp;getTotals()</pre>
<div class="block">Returns the server totals for signs and books</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Server totals</dd></dl>
</li>
</ul>
<a name="getStats()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getStats</h4>
<pre>public static&nbsp;<a href="../../../com/wolvencraft/yasp/db/data/sync/ServerStatistics.html" title="class in com.wolvencraft.yasp.db.data.sync">ServerStatistics</a>&nbsp;getStats()</pre>
<div class="block">Returns the generic server statistics</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>ServerStatistics</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataCollector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/wolvencraft/yasp/CommandManager.html" title="enum in com.wolvencraft.yasp"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/wolvencraft/yasp/LocalSession.html" title="class in com.wolvencraft.yasp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/wolvencraft/yasp/DataCollector.html" target="_top">Frames</a></li>
<li><a href="DataCollector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
